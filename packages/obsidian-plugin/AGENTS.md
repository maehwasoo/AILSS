# AGENTS.md (packages/obsidian-plugin)

This directory contains the **Obsidian community plugin** for AILSS.

## What it does

- Provides an in-Obsidian UI for AILSS actions (search, status, etc.)
- Spawns a local MCP stdio server process (desktop-only)
- Acts as a thin client over MCP; heavy logic should live in the MCP server / core packages

## Quick facts

- Plugin ID: `ailss-obsidian` (`packages/obsidian-plugin/manifest.json`)
- Desktop-only: spawns a local MCP stdio server process
- Build output: `main.js` (generated by esbuild; do not commit)

## Entry points

- Plugin runtime: `packages/obsidian-plugin/src/main.ts`
- Settings: `packages/obsidian-plugin/src/settings.ts`
- Build config: `packages/obsidian-plugin/esbuild.config.mjs`

## What to follow

- Treat `main.js` as build output; it should not be committed or hand-edited.
- Any vault/file edits must be behind an explicit user action (matching the repo’s “read-first” stance).
- Keep the plugin ID stable (it controls the folder name under `.obsidian/plugins/`).

## Local testing

Obsidian loads plugins from:

- `<Vault>/.obsidian/plugins/<plugin-id>/`

For faster iteration, point Obsidian at a test vault and use a symlink so Obsidian loads the plugin straight from this folder.
Exact build/dev scripts live in `packages/obsidian-plugin/package.json`.

## Integration boundary

- Read-only recommendations/search should come from the MCP server tools.
- Any file edits must be behind an explicit user action (apply button, etc.).
