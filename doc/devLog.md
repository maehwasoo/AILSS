# 개발 로그

## 2025년 4월 18일 - main.ts 모듈화

### 배경
기존의 `main.ts` 파일은 모든 서비스, 명령어, 리본 아이콘 등의 초기화 코드가 하나의 파일에 집중되어 있어 파일의 길이가 길고 유지 보수가 어려웠습니다. 코드베이스가 커짐에 따라 새로운 기능을 추가하거나 기존 기능을 수정할 때마다 `main.ts` 파일이 더 복잡해지는 문제가 있었습니다.

### 모듈화 전략
`main.ts`를 세 개의 핵심 레지스트리 클래스로 분리하는 모듈화 작업을 수행했습니다:

1. **ServiceRegistry (`src/core/serviceRegistry.ts`)**
   - 모든 매니저 객체와 서비스를 초기화하고 관리하는 중앙 레지스트리
   - 서비스들을 논리적인 그룹(노트 생성, 업데이트, AI 서비스 등)으로 구성
   - 각 서비스에 대한 게터 메서드를 제공하여 접근성 향상

2. **CommandRegistry (`src/core/commandRegistry.ts`)**
   - 모든 명령어 등록을 담당
   - 명령어들을 논리적인 그룹별로 등록 메서드 분리
   - 명령어 콜백 함수에서 필요한 서비스를 ServiceRegistry를 통해 접근

3. **RibbonRegistry (`src/core/ribbonRegistry.ts`)**
   - 모든 리본 메뉴 아이콘과 관련 동작을 관리
   - 기능별로 리본 아이콘 그룹화
   - 아이콘 클릭 시 ServiceRegistry를 통해 필요한 서비스 접근

### 모듈화의 이점

1. **관심사 분리**
   - 각 레지스트리는 명확한 책임과 역할을 가짐
   - 코드의 응집도 향상 및 결합도 감소

2. **유지 보수성 향상**
   - 기능별로 코드가 분리되어 관련 코드를 쉽게 찾고 수정 가능
   - 버그 수정이나 기능 확장 시 영향 범위 최소화

3. **가독성 개선**
   - 각 파일이 더 짧고 집중된 코드로 구성됨
   - 명확한 구조와 네이밍으로 코드 이해 용이

4. **확장성 강화**
   - 새로운 기능이나 서비스 추가 시 관련 레지스트리만 수정
   - 플러그인 아키텍처가 체계적으로 정리되어 향후 확장에 대비

5. **테스트 용이성**
   - 분리된 모듈은 독립적으로 테스트 가능
   - 의존성 주입을 통한 모의 객체 사용 가능

### 구현 세부 사항
- 레지스트리 간의 의존성 관리를 위해 생성자 주입 방식 사용
- `main.ts`는 각 레지스트리의 초기화와 조정에만 집중
- 모든 서비스는 `ServiceRegistry`를 통해서만 접근하도록 표준화
- 직접 노출이 필요한 일부 서비스(예: noteRefactoringManager)만 main 클래스에 직접 참조

